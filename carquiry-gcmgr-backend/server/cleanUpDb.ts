// import * as mongoose from 'mongoose';
// import {config} from './config/environment';
// import Inventory from './api/inventory/inventory.model';
// import {ErrorLogger} from './loggers';
//
// import './api/company/autoBuyRate.model';
//
// const errorLogger = new ErrorLogger();
//
// // Connect to database
// mongoose.connect(config.mongo.uri, config.mongo.options);
// mongoose.connection.on('error', function(err) {
//   console.error('MongoDB connection error: ' + err);
//   process.exit(-1);
// });
//
// async function backfill() {
//   try {
//
//     console.log('**************BACKFILLING INVENTORIES WITH VALUES WHICH ARE NOW TO BE SAVED IN THE DB**********');
//     const inventoryCount = await Inventory.find().count();
//     const promises = [];
//     // Just initiate a basic change on each inventory to backfill the values necessary
//     for (let currentIndex = 0; currentIndex < inventoryCount; currentIndex = currentIndex + 10) {
//       const thisInventoryBatch = await Inventory.find({updated: {$exists:false}}).sort({created: -1}).limit(10).skip(currentIndex);
//       for (const inventory of thisInventoryBatch) {
//         inventory.updated = new Date();
//         promises.push(inventory.save());
//       }
//     }
//     setTimeout(async () => {
//       await Promise.all(promises);
//       console.log('**************DONE**********');
//       process.exit();
//     }, 2000);
//   } catch (e) {
//     console.log('**************CATCH IN BACKFILL**********');
//     console.log(e);
//     errorLogger.log(e);
//     console.log('An error has occurred. Check the log for details.');
//   }
// }
//
// backfill();
//
// var cardNumbers = [
//   '9107000013476760'
//   ,'9107000010656570'
//   ,'9107000013344190'
//   ,'6364911008021009969'
//   ,'6151560011182751'
//   ,'6100123748723853'
//   ,'6125138524530553'
//   ,'6119437936787290'
//   ,'6143056734109502'
//   ,'2122212263718454'
//   ,'6120214041791968'
//   ,'6393050572038480909'
//   ,'6393050395845915226'
//   ,'6006491591957017168'
//   ,'9107000012237841'
//   ,'2123212227037909'
//   ,'9107000011541177'
//   ,'6006491591608093139'
//   ,'6276000001149515304'
//   ,'2122212269381240'
//   ,'2123212214337999'
//   ,'98061380009427219997410'
//   ,'6141626084930555'
//   ,'1110210292119464926'
//   ,'6276000001184926572'
//   ,'627715719449759'
//   ,'2123212115936048'
//   ,'2123212218768769'
//   ,'6097627757300650'
//   ,'6393050605375214331'
//   ,'6006496958092454777'
//   ,'6120215053635587'
//   ,'6006491591902972855'
//   ,'2122212270767262'
//   ,'6139684344807877'
//   ,'6145699788474858'
//   ,'98061450164165879997542'
//   ,'6276000001181550086'
//   ,'6144483919867054'
//   ,'6006491591734210318'
//   ,'6136438188230368'
//   ,'6097625473744999'
//   ,'6119438478980709'
//   ,'6144483916986063'
//   ,'98061450781182859997411'
//   ,'6120214972437725'
//   ,'6006491591893890413'
//   ,'1110210825120552112'
//   ,'6119437733580916'
//   ,'6006496959047238927'
//   ,'6084809209769456'
//   ,'6006496958074040743'
//   ,'6112812085996095'
//   ,'6006491591893036264'
//   ,'98061450818915969997418'
//   ,'6120214129203256'
//   ,'6393050710742000353'
//   ,'6006491591894017321'
//   ,'6119438050577422'
//   ,'6393050238640176158'
//   ,'6006496958097653340'
//   ,'98061380045795969997418'
//   ,'98061450862536199997419'
//   ,'6006496958071227103'
//   ,'6120611482227185'
//   ,'6129314678847833'
//   ,'6006496958088433025'
//   ,'6006491591899067255'
//   ,'98061380004967329997417'
//   ,'6006491591723403544'
//   ,'98061380031427919997415'
//   ,'6006491591892149662'
//   ,'6006491591608009671'
//   ,'98061380038740039997419'
//   ,'6276000001181572148'
//   ,'6006495915870571108'
//   ,'212258542661'
//   ,'98061380031456449997413'
//   ,'6006491591903080187'
//   ,'6072848748641262'
//   ,'6096483781712377'
//   ,'6139619549205657'
//   ,'6276000001552570543'
//   ,'6120214019277555'
//   ,'2123212210621180'
//   ,'611448025885'
//   ,'6393050239402160059'
//   ,'6129296546039874'
//   ,'98061450780005389997414'
//   ,'98061380057969709997419'
//   ,'627715128383557'
//   ,'2123212231381707'
//   ,'6006496958099874522'
//   ,'9100000023332687'
//   ,'2123212227037941'
//   ,'2122212260955430'
//   ,'9107000012435122'
//   ,'627715633329871'
//   ,'9107000012435072'
//   ,'2123212236827852'
//   ,'6393050167557472229'
//   ,'6276000001184335873'
//   ,'6006491591609194472'
//   ,'6276000001184268728'
//   ,'2123212214475211'
//   ,'627715216309738'
//   ,'6276000001184267944'
//   ,'6006491591719408317'
//   ,'9107000011541094'
//   ,'6096483811996882'
//   ,'6393050973680271036'
//   ,'6119441052261953'
//   ,'6082674502533279'
//   ,'2123212229364921'
//   ,'2123212231092593'
//   ,'6393050554282152293'
//   ,'2123262801515903'
//   ,'6275081000039446947'
//   ,'8107000010313661'
//   ,'9107000012103001'
//   ,'6276000001136484282'
//   ,'2125495183445509'
//   ,'6136907349555211'
//   ,'98061402408189099997410'
//   ,'639455810990809'
//   ,'2122212270010739'
//   ,'627715629597648'
//   ,'6006491591958164845'
//   ,'6276000001136484241'
//   ,'6276000001184275889'
//   ,'2123212236831672'
//   ,'98061380069844829997415'
//   ,'98061380041659459997417'
//   ,'9107000002132606'
//   ,'6276000001149515288'
//   ,'6108175765511818'
//   ,'9107000011540963'
//   ,'2123212231381699'
//   ,'627715633537044'
//   ,'6116623559193307'
//   ,'6006495915870748219'
//   ,'98061402457574849997416'
//   ,'8107000010566177'
//   ,'6119401214414580'
//   ,'6006495915860884578'
//   ,'2122212264089608'
//   ,'2122212260964366'
//   ,'2122212269736468'
//   ,'2123212232522614'
//   ,'6276000001149515296'
//   ,'98061380002664449997417'
//   ,'6393050950950957155'
//   ,'6276000001181668763'
//   ,'6087517992689752'
//   ,'6117809355431143'
//   ,'6276000001149515585'
//   ,'6276000001181549906'
//   ,'6276000001152568471'
//   ,'627715238934778'
//   ,'2122212264518762'
//   ,'627715216308821'
//   ,'627715637838968'
//   ,'6275081000038066423'
//   ,'2123212226078185'
//   ,'8107000012241035'
//   ,'6276000001149515544'
//   ,'6276000001182091668'
//   ,'611446931358'
//   ,'627715245173402'
//   ,'6143053837982018'
//   ,'6006496958015329874'
//   ,'6130194762621765'
//   ,'2122212263719361'
//   ,'612044394474'
//   ,'1110210524601427759'
//   ,'2122212261724975'
//   ,'2122212270003098'
//   ,'6276000001181507003'
//   ,'627715633245705'
//   ,'6276000001180957522'
//   ,'2123212236115829'
//   ,'2123212113797764'
//   ,'2223212122701475'
//   ,'2122212264175761'
//   ,'627715716147281'
//   ,'2223212136993340'
//   ,'6006491591608135336'
//   ,'2123212115935990'
//   ,'2123212226515681'
//   ,'627715581072556'
//   ,'6276000001184925962'
//   ,'2123212113672900'
//   ,'6276000001180957514'
//   ,'6276000001181559400'
//   ,'6143056403528950'
//   ,'504507499848955'
//   ,'9107000000382385'
//   ,'91070000012987734'
//   ,'9107000012236520'
//   ,'6276000001181572171'
//   ,'6276000001184894580'
//   ,'9107000013344174'
//   ,'6125288681053062'
//   ,'6276000001182092062'
//   ,'639455990383916'
//   ,'98061402242185679997416'
//   ,'627715720139746'
//   ,'6276000001152568455'
//   ,'6393050449849589287'
//   ,'6132069885984930'
//   ,'2122212270012198'
//   ,'98061380064044259997416'
//   ,'8107000010985476'
//   ,'6276000001148834565'
//   ,'6276000001184328654'
//   ,'6276000001184328761'
//   ,'627715219699010'
//   ,'6276000001182091650'
//   ,'6276000001180957571'
//   ,'2122212264090267'
//   ,'639455039194910'
//   ,'2123212113488935'
//   ,'6276000001151000914'
//   ,'6275081000038813691'
//   ,'9107000012435114'
//   ,'2123212117542018'
//   ,'9107000010620329'
//   ,'6006491591901531942'
//   ,'9100000023509961'
//   ,'9107000012236504'
//   ,'9107000012103019'
//   ,'8107000010737406'
//   ,'639455039194951'];
//
// db.cards.find({number: {$in : cardNumbers}}).forEach((card)=> {
//   if (card.inventory) {
//     var count = db.inventories.find({_id: card.inventory}).count() || 0;
//     if (count === 0) {
//       print('Removing: ' + card.number);
//       db.cards.remove({_id: card._id});
//     }
//   } else {
//     print('Removing' + card.number);
//     db.cards.remove({_id: card._id});
//   }
// });
